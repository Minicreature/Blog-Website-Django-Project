{% extends "blog/base.html" %}
{% load static %}
{% block content %}
<div class="content-section" style="max-width: 900px; margin: 0 auto;">
  <h2 class="text-center mb-4">Edit Profile</h2>

  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="row">
      <!-- User Information Column -->
      <div class="col-md-6">
        <h3
          style="font-size: 1.25rem; margin-bottom: 1.5rem; color: var(--primary); border-bottom: 2px solid var(--border); padding-bottom: 0.5rem;">
          User Information</h3>
        {% for field in u_form %}
        <div class="mb-3">
          <label class="form-label">{{ field.label }}</label>
          {{ field }}
          {% if field.help_text %}
          <small class="form-text text-muted">{{ field.help_text }}</small>
          {% endif %}
          {% for error in field.errors %}
          <div class="alert alert-danger">{{ error }}</div>
          {% endfor %}
        </div>
        {% endfor %}
      </div>

      <!-- Profile Details Column -->
      <div class="col-md-6">
        <h3
          style="font-size: 1.25rem; margin-bottom: 1.5rem; color: var(--secondary); border-bottom: 2px solid var(--border); padding-bottom: 0.5rem;">
          Profile Details</h3>

        <div class="mb-4 text-center">
          <p class="form-label">Current Picture</p>
          <img src="{{ user.profile.avatar_url }}" alt="{{ user.username }}" class="author-img"
            style="width: 120px; height: 120px; border: 4px solid var(--surface); box-shadow: var(--shadow-md);">
        </div>

        {% for field in p_form %}
        <div class="mb-3">
          <label class="form-label">{{ field.label }}</label>
          {{ field }}
          {% if field.help_text %}
          <small class="form-text text-muted">{{ field.help_text }}</small>
          {% endif %}
          {% for error in field.errors %}
          <div class="alert alert-danger">{{ error }}</div>
          {% endfor %}
        </div>
        {% endfor %}
      </div>
    </div>

    <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4 pt-4 border-top">
      <a href="{% url 'profile' user.username %}" class="btn btn-outline me-md-2">Cancel</a>
      <button class="btn btn-primary" type="submit">Save Changes</button>
    </div>
  </form>
</div>
{% endblock content %}